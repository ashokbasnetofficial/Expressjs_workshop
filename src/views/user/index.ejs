<!DOCTYPE html>
<html lang="en">
<head>

</head>
<body>
	<div class="container">
		<div class="table-responsive">
			<div class="table-wrapper">
				<div class="table-title">
					<div class="row">
						<div class="col-xs-6">
							<h2>Manage <b>Employees</b></h2>
						</div>
						<div class="col-xs-6">
							<a href="#addEmployeeModal" class="btn btn-success" data-toggle="modal"><i
									class="material-icons">&#xE147;</i> <span>Add New Employee</span></a>
							<a href="#deleteEmployeeModal" class="btn btn-danger" data-toggle="modal"><i
									class="material-icons">&#xE15C;</i> <span>Delete</span></a>
						</div>
					</div>
				</div>
				<table id="employeeTable" class="table table-striped table-hover">
					<thead>
						<tr>
							<th>#</th>
							<th>username</th>
							<th>password</th>
							<th>Name</th>
							<th>Email</th>
							<th>Phone</th>
							<th>Actions</th>
	
						</tr>
					</thead>
					<tbody  id="table-body">
						<% 
							var currentPage=1; 
							var itemsPerPage=5; 
							var totalPages=Math.ceil(data.length / itemsPerPage);
							var startIndex=(currentPage - 1) * itemsPerPage;
							var endIndex=startIndex + itemsPerPage; 
							var currentItems=data.slice(startIndex, endIndex); 
						  %>
						  <% currentItems.forEach(function(user, i) { %>
							<tr>
							   <td><%= i + 1 %></td>
							   <td><%= user.username %></td>
							   <td><%= user.password %></td>
							   <td><%= user.name %></td>
							   <td><%= user.email %></td>
							   <td><%= user.phone %></td>
							   <td>
								  <a href="#editEmployeeModal" class="edit" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>
								  <a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
							   </td>
							</tr>
						 <% }); %>
						 
					</tbody>
				</table>
				<div class="clearfix">
					<div class="hint-text">Showing <b>
							<%= currentItems.length %>
						</b> out of <b>
							<%= data.length %>
						</b> entries</div>
						<ul class="pagination">
							<% for (var i = 1; i <= totalPages; i++) { %>
							   <% if (i === currentPage) { %>
								  <li class="page-item active"><a href="#" class="page-link"><%= i %></a></li>
							   <% } else { %>
								  <li class="page-item"><a href="#" class="page-link" onclick="onChange(<%= i %>,'<%=data %>')"><%= i %></a></li>
							   <% } %>
							<% } %>
						 </ul>
						 
				</div>
			</div>
		</div>
	</div>
	<!-- Edit Modal HTML -->
	<div id="addEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form method="post">
					<div class="modal-header">
						<h4 class="modal-title">Edit Employee</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>Username</label>
							<input type="text" name="username" class="form-control" required>
						</div>
						<div class="form-group">
							<label>password</label>
							<input type="password" name="password" class="form-control" required>
						</div>
	
						<div class="form-group">
							<label>Name</label>
							<input type="text" name="name" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Email</label>
							<input type="text" name="email" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Phone</label>
							<input type="text" name="phone" class="form-control" required>
						</div>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-info" value="Save">
					</div>
				</form>
			</div>
		</div>
	</div>
	<!-- Edit Modal HTML -->
	<div id="editEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form>
					<div class="modal-header">
						<h4 class="modal-title">Edit Employee</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">
						<div class="form-group">
							<label>Username</label>
							<input type="text" name="username" class="form-control" required>
						</div>
						<div class="form-group">
							<label>password</label>
							<input type="password" class="form-control" required>
						</div>
	
						<div class="form-group">
							<label>Name</label>
							<input type="text" name="name" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Email</label>
							<input type="text" name="email" class="form-control" required>
						</div>
						<div class="form-group">
							<label>Phone</label>
							<input type="text" name="email" class="form-control" required>
						</div>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-info" value="Save">
					</div>
				</form>
			</div>
		</div>
	</div>
	<!-- Delete Modal HTML -->
	<div id="deleteEmployeeModal" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<form>
					<div class="modal-header">
						<h4 class="modal-title">Delete Employee</h4>
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					</div>
					<div class="modal-body">
						<p>Are you sure you want to delete these Records?</p>
						<p class="text-warning"><small>This action cannot be undone.</small></p>
					</div>
					<div class="modal-footer">
						<input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
						<input type="submit" class="btn btn-danger" value="Delete">
					</div>
				</form>
			</div>
		</div>
	
	</div>
	<div>
		<%=data%>
	</div>
<script>
const onChange =(page,data)=>{
	
 renderTable(page,data);
   
}

function renderTable(currentPage,data) {
	  console.log(currentPage)
	  console.log(data)
	   var startIndex = (currentPage - 1) * 5;
	   var endIndex = startIndex + 5;
	   var currentItems = data.slice(startIndex, endIndex);
	   var tableBody = document.getElementById("table-body");
 
	   var html = "";
	   currentItems.forEach(function(user, i) {
		  html += "<tr>";
		  html += "<td>" + (startIndex + i + 1) + "</td>";
		  html += "<td>" + user.username + "</td>";
		  html += "<td>" + user.password + "</td>";
		  html += "<td>" + user.name + "</td>";
		  html += "<td>" + user.email + "</td>";
		  html += "<td>" + user.phone + "</td>";
		  html += "<td>";
		  html += '<a href="#editEmployeeModal" class="edit" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>';
		  html += '<a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>';
		  html += "</td>";
		  html += "</tr>";
	   });
 
	   tableBody.innerHTML = html;
 
	   var pagination = document.getElementsByClassName("pagination")[0];
	   pagination.innerHTML = generatePaginationLinks();
	}
 
	function generatePaginationLinks() {
	   var links = "";
	   for (var i = 1; i <= totalPages; i++) {
		  if (i === currentPage) {
			 links += '<li class="page-item active"><a href="#" class="page-link">' + i + '</a></li>';
		  } else {
			 links += '<li class="page-item"><a href="#" class="page-link" onclick="changePage(' + i + ')">' + i + '</a></li>';
		  }
	   }
	   return links;
	}
 
	// Initial rendering
	renderTable();
 </script>
 
</body>
</html>